function defineStructure() {} function onSync(lastSyncDate) {} function createDataset(fields, constraints, sortFields) { log.info("-> In√≠cio | Dataset | fdwt_bolao_pf_jogos.js"); var dataset = DatasetBuilder.newDataset(); var C_DOCUMENT_ID = null; if (constraints != null) { for (var i = 0; i < constraints.length; i++) { if (constraints[i].fieldName == "DOCUMENT_ID") { C_DOCUMENT_ID = constraints[i].initialValue; } } } dataset.addColumn("ID"); dataset.addColumn("DATA"); dataset.addColumn("DATA_TS"); dataset.addColumn("FASE"); dataset.addColumn("TIME_A"); dataset.addColumn("TIME_A_IMAGEM"); dataset.addColumn("TIME_A_RESULTADO"); dataset.addColumn("TIME_B"); dataset.addColumn("TIME_B_IMAGEM"); dataset.addColumn("TIME_B_RESULTADO"); var ca = DatasetFactory.createConstraint("metadata#active", "true", "true", ConstraintType.MUST), cb = DatasetFactory.createConstraint("metadata#id", C_DOCUMENT_ID, C_DOCUMENT_ID, ConstraintType.MUST), cf = new Array(ca, cb), dsCampeonato = DatasetFactory.getDataset("fdwt_bolao_campeonato", null, cf, null); for (var i = 0; i < dsCampeonato.rowsCount; i++) { var documentId = C_DOCUMENT_ID, documentVersion = dsCampeonato.getValue(i, "metadata#version"), c1 = DatasetFactory.createConstraint("tablename", "jJogo", "jJogo", ConstraintType.MUST), c2 = DatasetFactory.createConstraint("metadata#id", documentId, documentId, ConstraintType.MUST), c3 = DatasetFactory.createConstraint("metadata#version", documentVersion, documentVersion, ConstraintType.MUST), c4 = DatasetFactory.createConstraint("metadata#active", "true", "true", ConstraintType.MUST), cf = new Array(c1, c2, c3, c4), dsJogos = DatasetFactory.getDataset("fdwt_bolao_campeonato", null, cf, null); for (var j = 0; j < dsJogos.rowsCount; j++) { var ID = dsJogos.getValue(j, "jJogoId"); var DATA = dsJogos.getValue(j, "jJogoData"); var DATA_TS = dsJogos.getValue(j, "jJogoDataTs"); var FASE = dsJogos.getValue(j, "jJogoFase"); var TIME_A = dsJogos.getValue(j, "jJogoTimeA"); var TIME_A_IMAGEM = dsJogos.getValue(j, "jJogoTimeA_Imagem"); var TIME_A_RESULTADO = dsJogos.getValue(j, "jJogoTimeA_Resultado"); var TIME_B = dsJogos.getValue(j, "jJogoTimeB"); var TIME_B_IMAGEM = dsJogos.getValue(j, "jJogoTimeB_Imagem"); var TIME_B_RESULTADO = dsJogos.getValue(j, "jJogoTimeB_Resultado"); dataset.addRow(new Array(ID, DATA, DATA_TS, FASE, TIME_A, TIME_A_IMAGEM, TIME_A_RESULTADO, TIME_B, TIME_B_IMAGEM, TIME_B_RESULTADO)); } } log.info("-> BeforeReturn | Dataset | fdwt_bolao_pf_jogos.js"); return dataset; } function onMobileSync(user) {}