function createDataset(fields, constraints, sortFields) { log.info("Digte Public Form - @@@ Inicio Dataset ds_dpf_listaTipoDocumento.js"); var datasetReturn = DatasetBuilder.newDataset(); datasetReturn.addColumn("tipoDocumentoCodigo"); datasetReturn.addColumn("tipoDocumentoNome"); var constraints = []; for (var c = 0; c < constraints.length; c++) { if (constraints[c].fieldName == "tipoDocumentoCodigo") { var tipoDocumentoCodigo = (constraints[c].initialValue.trim()); var c1 = DatasetFactory.createConstraint("tipoDocumentoCodigo", tipoDocumentoCodigo, tipoDocumentoCodigo, ConstraintType.MUST); constraints.push(c1); } if (constraints[c].fieldName == "tipoDocumentoNome") { var tipoDocumentoNome = (constraints[c].initialValue.trim()); var c1 = DatasetFactory.createConstraint("tipoDocumentoNome", tipoDocumentoNome, tipoDocumentoNome, ConstraintType.MUST); constraints.push(c1); } if (constraints[c].fieldName == "sqlLimit") { var sqlLimit = (constraints[c].initialValue.trim()); var c1 = DatasetFactory.createConstraint("sqlLimit", sqlLimit, sqlLimit, ConstraintType.MUST); constraints.push(c1); } } var dsTipoDocumento = DatasetFactory.getDataset("dpf_tipo_documento", null, constraints, null); if (dsTipoDocumento != null && dsTipoDocumento != undefined) { for ( var i = 0; i < dsTipoDocumento.rowsCount; i++) { var tipoDocumentoCodigo = dsTipoDocumento.getValue(i, "tipoDocumentoCodigo"); var tipoDocumentoNome = dsTipoDocumento.getValue(i, "tipoDocumentoNome"); datasetReturn.addRow(new Array(tipoDocumentoCodigo, tipoDocumentoNome)); } } /*verifica se admissao digitla esta ativa para acessar os kits de documentos disponiveis*/ var c1 = DatasetFactory.createConstraint("metadata#active", "true", "true", ConstraintType.MUST); var dataset = DatasetFactory.getDataset("dpf_configuracao_admissao_digital", null, [c1], null); if (dataset != null && dataset.rowsCount >= 0){ var dsKitAssinatura = DatasetFactory.getDataset("ds_dpf_ad_documents", null,null, null); if (dsKitAssinatura != null && dsKitAssinatura != undefined) { for ( var i = 0; i < dsKitAssinatura.rowsCount; i++) { var tipoDocumentoCodigo = dsKitAssinatura.getValue(i, "id") + "-cont"; var tipoDocumentoNome = dsKitAssinatura.getValue(i, "title"); datasetReturn.addRow(new Array(tipoDocumentoCodigo, tipoDocumentoNome)); } } } /*verifica se admissao digitla esta ativa para liberar os campos especificos*/ log.info("Digte Public Form - @@@ Fim Dataset ds_dpf_listaTipoDocumento.js"); return datasetReturn; }